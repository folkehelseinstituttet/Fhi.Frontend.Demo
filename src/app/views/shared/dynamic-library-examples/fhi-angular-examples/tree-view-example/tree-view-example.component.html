<tree-root [nodes]="treeViewSimpleNodes" *ngIf="itemId === itemIds.TreeView"></tree-root>


<div *ngIf="itemId === itemIds.TreeViewNavigation" class="row">
  <div class="col-md-8 col-lg-6">

    <mat-tree class="fhi-material-tree" [dataSource]="dataSource" [treeControl]="treeControl">
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
        <a class="fhi-material-tree__link" [routerLink]="node.uri" routerLinkActive="active">{{ node.name }}</a>
      </mat-tree-node>

      <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
        <div class="mat-tree-node">
          <a class="fhi-material-tree__link" [routerLink]="node.uri" routerLinkActive="active">{{ node.name }}</a>
          <button class="fhi-material-tree__toggler fhi-material-tree__toggler--chevron" mat-icon-button
            matTreeNodeToggle [attr.aria-label]="'Vis/skjul undernivåer av ' + node.name">
            <i
              [ngClass]="{'icon-chevron-up' : treeControl.isExpanded(node), 'icon-chevron-down' : !treeControl.isExpanded(node)}"></i>
          </button>
        </div>

        <div class="fhi-material-tree__nested-group"
          [class.fhi-material-tree__invisible]="!treeControl.isExpanded(node)" role="group">
          <ng-container matTreeNodeOutlet></ng-container>
        </div>
      </mat-nested-tree-node>
    </mat-tree>

  </div>
</div>


<div *ngIf="itemId === itemIds.TreeViewCheckbox">
  <div class="col-md-8 col-lg-6">

    <mat-tree class="fhi-material-tree fhi-material-tree--check"
              [dataSource]="dataSource"
              [treeControl]="treeControl">
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
        <div class="d-flex flex-column justify-content-center">
          <div class="form-check">
            <input class="form-check-input"
                   type="checkbox"
                   value=""
                   [id]="node.id"
                   [checked]="node.checked"
                   (click)="checkTreeState(node.id)">
            <label class="form-check-label" [for]="node.id">
              {{ node.name }}
            </label>
          </div>
        </div>
      </mat-tree-node>

      <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
        <div class="mat-tree-node">
          <button class="fhi-material-tree__toggler fhi-material-tree__toggler--plus"
                  mat-icon-button matTreeNodeToggle
                  [attr.aria-label]="'Vis/skjul undernivåer av ' + node.name">
            <i [ngClass]="
               {
                'icon-dash-circle' : treeControl.isExpanded(node) && !node.anyCheckedInSelection,
                'icon-plus-circle' : !treeControl.isExpanded(node) && !node.anyCheckedInSelection,
                'icon-dash-circle-fill' : treeControl.isExpanded(node) && node.anyCheckedInSelection,
                'icon-plus-circle-fill' : !treeControl.isExpanded(node) && node.anyCheckedInSelection
               }"></i>
          </button>
          <div class="d-flex flex-column justify-content-center">
            <div class="form-check">
              <input class="form-check-input"
                     type="checkbox"
                     value=""
                     [id]="node.id"
                     [checked]="node.checked"
                     (click)="checkTreeState(node.id)">
              <label class="form-check-label" [for]="node.id">
                {{ node.name }}
              </label>
            </div>
          </div>
        </div>

        <div class="fhi-material-tree__nested-group"
          [class.fhi-material-tree__invisible]="!treeControl.isExpanded(node)" role="group">
          <ng-container matTreeNodeOutlet></ng-container>
        </div>
      </mat-nested-tree-node>
    </mat-tree>

  </div>
</div>


<div *ngIf="itemId === itemIds.TreeViewBuilder">
  <div class="mb-2">
    <button class="btn fhi-btn-add-tree-node p-0">
      <i class="icon-plus-circle-fill"></i>
      <span class="btn__text">Legg til element</span>
    </button>
  </div>

  <tree-root [nodes]="treeViewSimpleNodes">
    <ng-template #treeNodeTemplate let-node let-index="index">
      <div class="tree-column">
        <span>{{ node.data.name }}</span>
        <button class="btn">
          <i class="icon-pencil"></i>
        </button>
        <button class="btn">
          <i class="icon-plus-circle"></i>
        </button>
        <button class="btn">
          <i class="icon-trash-can"></i>
        </button>
      </div>
    </ng-template>
  </tree-root>
</div>